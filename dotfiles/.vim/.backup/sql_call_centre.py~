# -*- coding: utf-8 -*-

import os
from datetime import datetime
from hashlib import sha256

from sqlalchemy import Table, ForeignKey, Column
from sqlalchemy.types import Unicode, Integer, DateTime, Boolean
from sqlalchemy.orm import relation, synonym

from rocket.model import DeclarativeBase, metadata, DBSession
from rocket.lib.model_utils import PhatBase, common_columns, get_phat_table, get_type_table

# ********************* Types ***********************************#

CallCentreUserStatusType = get_type_table(model_name='CallCentreUserStatus', table_name='call_centre_user_status')
TaskChannelType = get_type_table(model_name='TaskChannel', table_name='task_channel')
CallStatusType = get_type_table(model_name='CallStatus', table_name='call_status')

# ********************* Workspace = Call Centre ***********************************#

tbl_workspace = {
    '__tablename__': 'tbl_workspace',
    'name': common_columns.get('description_not_nullable')(),
    'event_callback_url': common_columns.get('description_not_nullable')(),
    'workspace_sid': common_columns.get('description_not_nullable')(),
}
Workspace = get_phat_table(model_name='Workspace', columndict=tbl_workspace)

tbl_welcome_message = {
    '__tablename__': 'tbl_welcome_message',
    'name': common_columns.get('description_not_nullable')(),
    'language_id': common_columns.get('integer_not_nullable')(),
    'is_default': common_columns.get('boolean')(),
}
WelcomeMessage = get_phat_table(model_name='WelcomeMessage', columndict=tbl_welcome_message)

tbl_debugger_event = {
    '__tablename__': 'tbl_debugger_event',
    'date_created': common_columns.get('datetime_not_nullable')(),
    'event': common_columns.get('description_not_nullable')(),
}
DebuggerEvent = get_phat_table(model_name='DebuggerEvent', columndict=tbl_debugger_event)

# ********************* Workflow = Department ***********************************#

tbl_workspace_workflow = {
    '__tablename__': 'tbl_workspace_workflow',
    'workspace_id': common_columns.get('integer_not_nullable')(),
    'name': common_columns.get('description_not_nullable')(),
    'timeout_in_minutes': common_columns.get('integer_not_nullable')(),
    'assignment_callback_url': common_columns.get('description_not_nullable')(),
    'fallback_assignment_callback_url': common_columns.get('description_not_nullable')(),
    'task_queue_sid': common_columns.get('description_not_nullable')(),
    'expression_attribute': common_columns.get('description_not_nullable')(),
    'priority': common_columns.get('integer')(),
}
WorkspaceWorkflow = get_phat_table(model_name='WorkspaceWorkflow', columndict=tbl_workspace_workflow)

# ********************* Task = Call Request ***********************************#

tbl_workspace_workflow_task = {
    '__tablename__': 'tbl_workspace_workflow_task',
    'workspace_workflow_id': common_columns.get('integer_not_nullable')(),
    'task_channel_type_id': common_columns.get('integer_not_nullable')(),
    'friendly_name': common_columns.get('description_not_nullable')(),
    'task_queue_sid': common_columns.get('description_not_nullable')(),
    'queue_expression': common_columns.get('description_not_nullable')(),
    'target_workers': common_columns.get('description_not_nullable')(),
    'max_reserved_workers': common_columns.get('description_not_nullable')(),
    'date_created': common_columns.get('datetime_not_nullable')(),
    'task_order': common_columns.get('description_not_nullable')(),
    'reservation_activity_id': common_columns.get('integer_not_nullable')(),
    'assignment_activity_id': common_columns.get('integer_not_nullable')(),
}
WorkspaceWorkflowTask = get_phat_table(model_name='WorkspaceWorkflowTask', columndict=tbl_workspace_workflow_task)
