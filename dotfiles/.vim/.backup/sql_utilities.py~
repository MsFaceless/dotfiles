# -*- coding: utf-8 -*-

import os
from datetime import datetime
from hashlib import sha256

from sqlalchemy import Table, ForeignKey, Column
from sqlalchemy.types import Unicode, Integer, DateTime, Boolean
from sqlalchemy.orm import relation, synonym

from rocket.model import DeclarativeBase, metadata, DBSession
from rocket.lib.model_utils import PhatBase, common_columns, get_type_table, get_phat_table

# ---------------------------- Currency -----------------------------------
tbl_currency = {
    '__tablename__': 'tbl_currency',
    'code': common_columns.get('title_not_nullable')(),
    'name': common_columns.get('title_not_nullable')(),
    #'locale': common_columns.get('title')(),
    'is_home_currency': common_columns.get('boolean_default_false')()
}
Currency = get_phat_table(model_name='Currency', columndict=tbl_currency)

tbl_language = {
    '__tablename__': 'tbl_language',
    'code': common_columns.get('title_not_nullable')(),
    'name': common_columns.get('title_not_nullable')()
}
Language = get_phat_table(model_name='Language', columndict=tbl_language)

tbl_mail_merge = {
    '__tablename__': 'tbl_mail_merge',
    'code': common_columns.get('title_not_nullable')(),
    'name': common_columns.get('title_not_nullable')()
}
MailMerge = get_phat_table(model_name='MailMerge', columndict=tbl_mail_merge)

MailOptionType = get_type_table(model_name='MailOption', table_name='mail_option')
BillingFrequencyType =get_type_table(model_name='BillingFrequency', table_name='billing_frequency')

# ********************* Bank ***********************************#
tbl_bank = {
    '__tablename__': 'tbl_bank',
    'name': common_columns.get('title_not_nullable')()
}
Bank = get_phat_table(model_name='Bank', columndict=tbl_bank)

tbl_bank_branch = {
    '__tablename__': 'tbl_bank_branch',
    'bank_id': common_columns.get('integer_not_nullable')(),
    'branch': common_columns.get('description_not_nullable')(),
    'branch_code': common_columns.get('title')(),
}
BankBranch = get_phat_table(model_name='BankBranch', columndict=tbl_bank_branch)

# ********************* Location ***********************************#
tbl_country = {
    '__tablename__': 'tbl_country',
    'code': common_columns.get('title_not_nullable')(),
    'name': common_columns.get('title_not_nullable')()
}
Country = get_phat_table(model_name='Country', columndict=tbl_country)

tbl_region = {
    '__tablename__': 'tbl_region',
    'country_id': common_columns.get('integer_not_nullable')(),
    'name': common_columns.get('title_not_nullable')()
}
Region = get_phat_table(model_name='Region', columndict=tbl_region)

tbl_district = {
    '__tablename__': 'tbl_district',
    'region_id': common_columns.get('integer_not_nullable')(),
    'name': common_columns.get('title_not_nullable')()
}
District = get_phat_table(model_name='District', columndict=tbl_district)

tbl_centre = {
    '__tablename__': 'tbl_centre',
    'district_id': common_columns.get('integer_not_nullable')(),
    'name': common_columns.get('title_not_nullable')()
}
Centre = get_phat_table(model_name='Centre', columndict=tbl_centre)

# ********************* Vehicle Category ***********************************#
tbl_asset_vehicle_category = {
    '__tablename__': 'tbl_asset_vehicle_category',
    'name': common_columns.get('title_not_nullable')(),
}
AssetVehicleCategory = get_phat_table(model_name='AssetVehicleCategory', columndict=tbl_asset_vehicle_category)

# ********************* Visitor ***********************************#
tbl_visitor = {
    '__tablename__': 'tbl_visitor',
    'http_user_agent': common_columns.get('description_not_nullable')(),
    'query_string': common_columns.get('description_not_nullable')(),
    'external_ip_address': common_columns.get('description_not_nullable')(),
}
Visitor = get_phat_table(model_name='Visitor', columndict=tbl_visitor)

tbl_login = {
    '__tablename__': 'tbl_login',
    'user_id': common_columns.get('integer_not_nullable')(),
    'logged_in': common_columns.get('datetime_not_nullable')(),
    'bln_logged_out': common_columns.get('boolean_default_false')(),
    'logged_out': common_columns.get('datetime')(),
}
Login = get_phat_table(model_name='Login', columndict=tbl_login)

# ********************* System Params ***********************************#
SystemParameterDataType = get_type_table(model_name='SystemParameterData', table_name='system_parameter_data')

tbl_system_parameter_name = {
    '__tablename__': 'tbl_system_parameter_name',
    'code': common_columns.get('description_not_nullable')(),
    'name': common_columns.get('description_not_nullable')(),
}
SystemParameterName = get_phat_table(model_name='SystemParameterName', columndict=tbl_system_parameter_name)

tbl_system_parameter_value = {
    '__tablename__': 'tbl_system_parameter_value',
    'system_parameter_name_id': common_columns.get('integer_not_nullable')(),
    'system_parameter_data_type_id': common_columns.get('integer_not_nullable')(),
    'user_id': common_columns.get('integer')(),
}
SystemParameterValue = get_phat_table(model_name='SystemParameterValue', columndict=tbl_system_parameter_value)

tbl_system_parameter_boolean = {
    '__tablename__': 'tbl_system_parameter_boolean',
    'system_parameter_value_id': common_columns.get('integer_not_nullable')(),
    'value': common_columns.get('boolean')(),
}
SystemParameterBoolean = get_phat_table(model_name='SystemParameterBoolean', columndict=tbl_system_parameter_boolean)

tbl_system_parameter_integer = {
    '__tablename__': 'tbl_system_parameter_integer',
    'system_parameter_value_id': common_columns.get('integer_not_nullable')(),
    'value': common_columns.get('integer')(),
}
SystemParameterInteger = get_phat_table(model_name='SystemParameterInteger', columndict=tbl_system_parameter_integer)

tbl_system_parameter_link = {
    '__tablename__': 'tbl_system_parameter_link',
    'system_parameter_value_id': common_columns.get('integer_not_nullable')(),
    'table_name': common_columns.get('description_not_nullable')(),
    'column': common_columns.get('description_not_nullable')(),
    'value': common_columns.get('integer')(),
}
SystemParameterLink = get_phat_table(model_name='SystemParameterLink', columndict=tbl_system_parameter_link)

# ********************* Branding ***********************************#
tbl_branding = {
    '__tablename__': 'tbl_branding',
    'key': common_columns.get('title_not_nullable')(),
    'value': common_columns.get('title_not_nullable')(),
    'type': common_columns.get('title_not_nullable')(),
}
Branding = get_phat_table(model_name='Branding', columndict=tbl_branding)

# ********************* Holidays ***********************************#
tbl_holiday = {
    '__tablename__': 'tbl_holiday',
    'name': common_columns.get('description_not_nullable')(),
    'alternate_names': common_columns.get('description')(),
    'date': common_columns.get('date_not_nullable')(),
    'url': common_columns.get('description_not_nullable')(),
    'description': common_columns.get('longtext')(),
}
Holiday = get_phat_table(model_name='Holiday', columndict=tbl_holiday)
