import cv2
import subprocess
import time
import os

curdir = os.path.abspath(os.path.curdir)
stream = cv2.VideoCapture(2)
frame_one_active = False
frame_two_active = True
current_conky = None
while True:
    success, frame = stream.read()
    if not success: continue
    if frame_one_active: 
        frame_name = os.path.join(curdir, "frame_two.png")
        conky_name = os.path.join(curdir, "frame_two")
        cv2.imwrite(frame_name, frame)
        if current_conky: current_conky.terminate()
        current_conky = subprocess.Popen(["conky", "-c", conky_name])
        frame_one_active = False
        frame_two_active = True

    elif frame_two_active: 
        frame_name = os.path.join(curdir, "frame_one.png")
        conky_name = os.path.join(curdir, "frame_one")
        cv2.imwrite(frame_name, frame)
        if current_conky: current_conky.terminate()
        current_conky = subprocess.Popen(["conky", "-c", conky_name])
        frame_one_active = True
        frame_one_active = False
    time.sleep(0.1)
