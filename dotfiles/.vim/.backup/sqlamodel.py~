# -*- coding: utf-8 -*-

from calabash.lib.model_utils import common_columns, get_type_table, get_phat_table

# TYPES
AuditType = get_type_table(model_name='Audit', table_name='audit')
NotificationType = get_type_table(model_name='Notification', table_name='notification')

# TABLES
tbl_application = {
    '__tablename__': 'tbl_application',
    'name': common_columns.get('description_not_nullable')(),
    'guid': common_columns.get('description_not_nullable')(),
    'myimali_api_key': common_columns.get('description_not_nullable')(),
}
Application = get_phat_table(model_name='Application', columndict=tbl_application)

tbl_wallet_application_link = {
    '__tablename__': 'tbl_wallet_application_link',
    'application_id': common_columns.get('integer_not_nullable')(),
    'wallet_id': common_columns.get('integer_unique_not_nullable')(),
    'guid': common_columns.get('description_not_nullable')(),
}
WalletApplicationLink = get_phat_table(model_name='Application', columndict=tbl_wallet_application_link)

tbl_current_application = {
    '__tablename__': 'tbl_current_application',
    'application_id': common_columns.get('integer_not_nullable')(),
}
CurrentApplication = get_phat_table(model_name='CurrentApplication', columndict=tbl_current_application)

tbl_application_twilio_credentials = {
    '__tablename__': 'tbl_application_twilio_credentials',
    'application_id': common_columns.get('integer_not_nullable')(),
    'account_sid': common_columns.get('description_not_nullable')(),
    'auth_token': common_columns.get('description_not_nullable')(),
    'messaging_sid': common_columns.get('description_not_nullable')(),
    'twilio_number': common_columns.get('description_not_nullable')(),
    'whatsapp_number': common_columns.get('description_not_nullable')(),
}
ApplicationTwilioCredentials = get_phat_table(model_name='ApplicationTwilioCredentials', columndict=tbl_application_twilio_credentials)

tbl_wallet = {
    '__tablename__': 'tbl_wallet',

    # VAULT
    'entity_id': common_columns.get('integer_unique_not_nullable')(),

    # IMALI
    'myimali_reference': common_columns.get('description_unique')(),

    # MOBILE LOGIN
    'username': common_columns.get('description_unique')(),

    # OTHER
    'merchant_loyalty_program_id': common_columns.get('integer')(),
    'bln_suspended': common_columns.get('boolean_default_false_not_nullable')(),
}
Wallet = get_phat_table(model_name='Wallet', columndict=tbl_wallet)

tbl_merchant_reward_program = {
    '__tablename__': 'tbl_merchant_reward_program',
    'wallet_id': common_columns.get('integer_not_nullable')(),
    'percentage': common_columns.get('integer_not_nullable')(),
}
MerchantRewardProgram = get_phat_table(model_name='MerchantRewardProgram', columndict=tbl_merchant_reward_program)

tbl_temp_user_data = {
    '__tablename__': 'tbl_temp_user_data',
    'username': common_columns.get('description_not_nullable')(),
    'email': common_columns.get('description')(),
    'mobile': common_columns.get('description')(),
    'preferred_name': common_columns.get('description')(),
}
TempUserData = get_phat_table(model_name='TempUserData', columndict=tbl_temp_user_data)

tbl_username_account_link = {
    '__tablename__': 'tbl_username_account_link',
    'username': common_columns.get('description_not_nullable')(),
    'account_id': common_columns.get('integer_not_nullable')(),
}
UsernameAccountLink = get_phat_table(model_name='UsernameAccountLink', columndict=tbl_username_account_link)

tbl_notification = {
    '__tablename__': 'tbl_notification',
    'application_id': common_columns.get('integer')(),
    'notification_type_id': common_columns.get('integer_not_nullable')(),
    'from_username': common_columns.get('description_not_nullable')(),
    'from_entity_id': common_columns.get('integer_not_nullable')(),
    'to_username': common_columns.get('description_not_nullable')(),
    'to_entity_id': common_columns.get('integer_not_nullable')(),
    'message': common_columns.get('description_not_nullable')(),
    'groupname': common_columns.get('description')(),
    'amount': common_columns.get('integer')(),
    'actioned_notification_id': common_columns.get('integer')(),
    'bln_actioned': common_columns.get('boolean_default_false_not_nullable')(),
    'bln_viewed': common_columns.get('boolean_default_false_not_nullable')(),
    'bln_delivered': common_columns.get('boolean_default_false_not_nullable')(), # set this when returning the seen list
    'bln_deleted': common_columns.get('boolean_default_false_not_nullable')(),
}
Notification = get_phat_table(model_name='Notification', columndict=tbl_notification)

tbl_mobile_one_time_pin = {
    '__tablename__': 'tbl_mobile_one_time_pin',
    'username': common_columns.get('description')(),
    'mobile': common_columns.get('description_not_nullable')(),
    'otp': common_columns.get('description_not_nullable')(),
    'expiry': common_columns.get('datetime_not_nullable')(),
}
MobileOneTimePin = get_phat_table(model_name='MobileOneTimePin', columndict=tbl_mobile_one_time_pin)

tbl_message_template = {
    '__tablename__': 'tbl_message_template',
    'usage': common_columns.get('description')(),
    'message': common_columns.get('longtext')(),
}
MessageTemplate = get_phat_table(model_name='MessageTemplate', columndict=tbl_message_template)

tbl_transaction_history = {
    '__tablename__': 'tbl_transaction_history',
    'coupon_type': common_columns.get('title_not_nullable')(),
    'username': common_columns.get('title_not_nullable')(),
    'date': common_columns.get('title_not_nullable')(),
    'time': common_columns.get('title_not_nullable')(),
    'seconds': common_columns.get('title_not_nullable')(),
    'datetime': common_columns.get('datetime_not_nullable')(),
    'type': common_columns.get('title_not_nullable')(),
    'amount': common_columns.get('title_not_nullable')(),
    'balance': common_columns.get('title_not_nullable')(),
    'other': common_columns.get('title_not_nullable')(),
    'TrxId': common_columns.get('title_not_nullable')(),
    'paymentReference': common_columns.get('title_not_nullable')(),
}
TransactionHistory = get_phat_table(model_name='TransactionHistory', columndict=tbl_transaction_history)

tbl_merchant_loyalty_program = {
    '__tablename__': 'tbl_merchant_loyalty_program',
    'name': common_columns.get('description_not_nullable')(),
    'percentage': common_columns.get('integer_not_nullable')(),
}
MerchantLoyaltyProgram = get_phat_table(model_name='MerchantLoyaltyProgram', columndict=tbl_merchant_loyalty_program)

tbl_user_group = {
    '__tablename__': 'tbl_user_group',
    'owner_username': common_columns.get('description_not_nullable')(),
    'groupname': common_columns.get('description_not_nullable')(),
}
UserGroup = get_phat_table(model_name='UserGroup', columndict=tbl_user_group)

tbl_kyc_result = {
    '__tablename__': 'tbl_kyc_result',
    'result': common_columns.get('description_not_nullable')(),
    'reference': common_columns.get('description_not_nullable')(),
    'kyc_type': common_columns.get('description_not_nullable')(),
    'id_type': common_columns.get('description_not_nullable')(),
    'identity_number': common_columns.get('description_not_nullable')(),
    'message': common_columns.get('description_not_nullable')(),
    'username': common_columns.get('description_not_nullable')(),
}
KYCResult = get_phat_table(model_name='KYCResult', columndict=tbl_kyc_result)
